//! Access to data extracted from glyphs.app
//!
//! This data is needed when parsing glyphs files, but it is also useful in other places,
//! particularly for classifying glyphs for feature generation.
//!
//! The important thing about this data is that it is based on the conventional glyph names used by
//! designers, and includes information about glyphs that are not encoded in unicode (such as various
//! ligatures and combined base/mark pairs)
//!
//! Run resources/scripts/non_spacing_marks.py to update

use std::collections::HashSet;

// this file is generated by the script at ../glyphdata/rebuild.py
include!("../glyphdata/generated_glyph_data.rs");

/// The primary category for a given glyph
///
/// These categories are not the same as the unicode character categories.
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord)]
#[repr(u8)]
pub enum Category {
    Mark,
    Space,
    Separator,
    Letter,
    Number,
    Symbol,
    Punctuation,
    Other,
}

/// The subcategory of a given glyph
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord)]
#[repr(u8)]
pub enum Subcategory {
    Spacing,
    Radical,
    Math,
    Superscript,
    Geometry,
    Dash,
    DecimalDigit,
    Currency,
    Fraction,
    Halfform,
    Small,
    Number,
    Quote,
    Space,
    Letter,
    Jamo,
    Format,
    Parenthesis,
    Matra,
    Arrow,
    Nonspacing,
    Compatibility,
    Syllable,
    Ligature,
    Modifier,
    SpacingCombining,
    Emoji,
    Enclosing,
    None,
}

/// The Category & Subcategory of a glyph, per the glyphs.app GlyphData
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord)]
pub struct GlyphInfo {
    pub category: Category,
    pub sub_category: Subcategory,
}

impl GlyphInfo {
    const NONSPACING_MARK: Self = GlyphInfo::new(Category::Mark, Subcategory::Nonspacing);

    /// Lookup the glyph categories for this glyph, by name
    pub fn for_glyph(name: &str) -> Option<Self> {
        CATEGORIES.get(name).copied()
    }

    const fn new(category: Category, sub_category: Subcategory) -> Self {
        GlyphInfo {
            category,
            sub_category,
        }
    }
}

/// Returns `true` if this glyph name matches a known nonspacing mark
pub(crate) fn is_nonspacing_mark_name(name: &str) -> bool {
    // fast exit: length cannot match a mark
    if name.len() > 35 || matches!(name.len(), 1 | 2) {
        return false;
    }

    CATEGORIES
        .get(name)
        .map(|info| *info == GlyphInfo::NONSPACING_MARK)
        .unwrap_or(false)
}

fn any_nonspacing_mark_codepoint(codepoints: &HashSet<u32>) -> bool {
    // Failing name try by codepoint
    for cp in codepoints {
        match cp {
            0x0300 => return true,
            0x0301 => return true,
            0x0302 => return true,
            0x0303 => return true,
            0x0304 => return true,
            0x0305 => return true,
            0x0306 => return true,
            0x0307 => return true,
            0x0308 => return true,
            0x0309 => return true,
            0x030A => return true,
            0x030B => return true,
            0x030C => return true,
            0x030D => return true,
            0x030E => return true,
            0x030F => return true,
            0x0310 => return true,
            0x0311 => return true,
            0x0312 => return true,
            0x0313 => return true,
            0x0314 => return true,
            0x0315 => return true,
            0x0316 => return true,
            0x0317 => return true,
            0x0318 => return true,
            0x0319 => return true,
            0x031A => return true,
            0x031B => return true,
            0x031C => return true,
            0x031D => return true,
            0x031E => return true,
            0x031F => return true,
            0x0320 => return true,
            0x0321 => return true,
            0x0322 => return true,
            0x0323 => return true,
            0x0324 => return true,
            0x0325 => return true,
            0x0326 => return true,
            0x0327 => return true,
            0x0328 => return true,
            0x0329 => return true,
            0x032A => return true,
            0x032B => return true,
            0x032C => return true,
            0x032D => return true,
            0x032E => return true,
            0x032F => return true,
            0x0330 => return true,
            0x0331 => return true,
            0x0332 => return true,
            0x0333 => return true,
            0x0334 => return true,
            0x0335 => return true,
            0x0336 => return true,
            0x0337 => return true,
            0x0338 => return true,
            0x0339 => return true,
            0x033A => return true,
            0x033B => return true,
            0x033C => return true,
            0x033D => return true,
            0x033E => return true,
            0x033F => return true,
            0x0340 => return true,
            0x0341 => return true,
            0x0342 => return true,
            0x0343 => return true,
            0x0344 => return true,
            0x0345 => return true,
            0x0346 => return true,
            0x0347 => return true,
            0x0348 => return true,
            0x0349 => return true,
            0x034A => return true,
            0x034B => return true,
            0x034C => return true,
            0x034D => return true,
            0x034E => return true,
            0x034F => return true,
            0x0350 => return true,
            0x0351 => return true,
            0x0352 => return true,
            0x0353 => return true,
            0x0354 => return true,
            0x0355 => return true,
            0x0356 => return true,
            0x0357 => return true,
            0x0358 => return true,
            0x0359 => return true,
            0x035A => return true,
            0x035B => return true,
            0x035C => return true,
            0x035D => return true,
            0x035E => return true,
            0x035F => return true,
            0x0360 => return true,
            0x0361 => return true,
            0x0362 => return true,
            0x0363 => return true,
            0x0364 => return true,
            0x0365 => return true,
            0x0366 => return true,
            0x0367 => return true,
            0x0368 => return true,
            0x0369 => return true,
            0x036A => return true,
            0x036B => return true,
            0x036C => return true,
            0x036D => return true,
            0x036E => return true,
            0x036F => return true,
            0x0483 => return true,
            0x0484 => return true,
            0x0485 => return true,
            0x0486 => return true,
            0x0487 => return true,
            0x0591 => return true,
            0x0592 => return true,
            0x0593 => return true,
            0x0594 => return true,
            0x0595 => return true,
            0x0596 => return true,
            0x0597 => return true,
            0x0598 => return true,
            0x0599 => return true,
            0x059A => return true,
            0x059B => return true,
            0x059C => return true,
            0x059D => return true,
            0x059E => return true,
            0x059F => return true,
            0x05A0 => return true,
            0x05A1 => return true,
            0x05A2 => return true,
            0x05A3 => return true,
            0x05A4 => return true,
            0x05A5 => return true,
            0x05A6 => return true,
            0x05A7 => return true,
            0x05A8 => return true,
            0x05A9 => return true,
            0x05AA => return true,
            0x05AB => return true,
            0x05AC => return true,
            0x05AD => return true,
            0x05AE => return true,
            0x05AF => return true,
            0x05B0 => return true,
            0x05B1 => return true,
            0x05B2 => return true,
            0x05B3 => return true,
            0x05B4 => return true,
            0x05B5 => return true,
            0x05B6 => return true,
            0x05B7 => return true,
            0x05B8 => return true,
            0x05B9 => return true,
            0x05BA => return true,
            0x05BB => return true,
            0x05BC => return true,
            0x05BD => return true,
            0x05BF => return true,
            0x05C1 => return true,
            0x05C2 => return true,
            0x05C4 => return true,
            0x05C5 => return true,
            0x05C7 => return true,
            0x0610 => return true,
            0x0611 => return true,
            0x0612 => return true,
            0x0613 => return true,
            0x0614 => return true,
            0x0615 => return true,
            0x0616 => return true,
            0x0617 => return true,
            0x0618 => return true,
            0x0619 => return true,
            0x061A => return true,
            0x064B => return true,
            0x064C => return true,
            0x064D => return true,
            0x064E => return true,
            0x064F => return true,
            0x0650 => return true,
            0x0651 => return true,
            0x0652 => return true,
            0x0653 => return true,
            0x0654 => return true,
            0x0655 => return true,
            0x0656 => return true,
            0x0657 => return true,
            0x0658 => return true,
            0x0659 => return true,
            0x065A => return true,
            0x065B => return true,
            0x065C => return true,
            0x065D => return true,
            0x065E => return true,
            0x065F => return true,
            0x0670 => return true,
            0x06D6 => return true,
            0x06D7 => return true,
            0x06D8 => return true,
            0x06D9 => return true,
            0x06DA => return true,
            0x06DB => return true,
            0x06DC => return true,
            0x06DF => return true,
            0x06E0 => return true,
            0x06E1 => return true,
            0x06E2 => return true,
            0x06E3 => return true,
            0x06E4 => return true,
            0x06E7 => return true,
            0x06E8 => return true,
            0x06EA => return true,
            0x06EB => return true,
            0x06EC => return true,
            0x06ED => return true,
            0x0711 => return true,
            0x0730 => return true,
            0x0731 => return true,
            0x0732 => return true,
            0x0733 => return true,
            0x0734 => return true,
            0x0735 => return true,
            0x0736 => return true,
            0x0737 => return true,
            0x0738 => return true,
            0x0739 => return true,
            0x073A => return true,
            0x073B => return true,
            0x073C => return true,
            0x073D => return true,
            0x073E => return true,
            0x073F => return true,
            0x0740 => return true,
            0x0741 => return true,
            0x0742 => return true,
            0x0743 => return true,
            0x0744 => return true,
            0x0745 => return true,
            0x0746 => return true,
            0x0747 => return true,
            0x0748 => return true,
            0x0749 => return true,
            0x074A => return true,
            0x07EB => return true,
            0x07EC => return true,
            0x07ED => return true,
            0x07EE => return true,
            0x07EF => return true,
            0x07F0 => return true,
            0x07F1 => return true,
            0x07F2 => return true,
            0x07F3 => return true,
            0x0816 => return true,
            0x0817 => return true,
            0x0818 => return true,
            0x0819 => return true,
            0x081B => return true,
            0x081C => return true,
            0x081D => return true,
            0x081E => return true,
            0x081F => return true,
            0x0820 => return true,
            0x0821 => return true,
            0x0822 => return true,
            0x0823 => return true,
            0x0825 => return true,
            0x0826 => return true,
            0x0827 => return true,
            0x0829 => return true,
            0x082A => return true,
            0x082B => return true,
            0x082C => return true,
            0x082D => return true,
            0x0859 => return true,
            0x085A => return true,
            0x085B => return true,
            0x08E3 => return true,
            0x08E4 => return true,
            0x08E5 => return true,
            0x08E6 => return true,
            0x08E7 => return true,
            0x08E8 => return true,
            0x08E9 => return true,
            0x08EA => return true,
            0x08EB => return true,
            0x08EC => return true,
            0x08ED => return true,
            0x08EE => return true,
            0x08EF => return true,
            0x08F0 => return true,
            0x08F1 => return true,
            0x08F2 => return true,
            0x08F3 => return true,
            0x08F4 => return true,
            0x08F5 => return true,
            0x08F6 => return true,
            0x08F7 => return true,
            0x08F8 => return true,
            0x08F9 => return true,
            0x08FA => return true,
            0x08FB => return true,
            0x08FC => return true,
            0x08FD => return true,
            0x08FE => return true,
            0x08FF => return true,
            0x0900 => return true,
            0x0901 => return true,
            0x0902 => return true,
            0x093A => return true,
            0x093C => return true,
            0x0941 => return true,
            0x0942 => return true,
            0x0943 => return true,
            0x0944 => return true,
            0x0945 => return true,
            0x0946 => return true,
            0x0947 => return true,
            0x0948 => return true,
            0x094D => return true,
            0x0951 => return true,
            0x0952 => return true,
            0x0953 => return true,
            0x0954 => return true,
            0x0955 => return true,
            0x0956 => return true,
            0x0957 => return true,
            0x0962 => return true,
            0x0963 => return true,
            0x0981 => return true,
            0x09BC => return true,
            0x09C1 => return true,
            0x09C2 => return true,
            0x09C3 => return true,
            0x09C4 => return true,
            0x09CD => return true,
            0x09E2 => return true,
            0x09E3 => return true,
            0x0A01 => return true,
            0x0A02 => return true,
            0x0A3C => return true,
            0x0A41 => return true,
            0x0A42 => return true,
            0x0A47 => return true,
            0x0A48 => return true,
            0x0A4B => return true,
            0x0A4C => return true,
            0x0A4D => return true,
            0x0A51 => return true,
            0x0A70 => return true,
            0x0A71 => return true,
            0x0A75 => return true,
            0x0A81 => return true,
            0x0A82 => return true,
            0x0ABC => return true,
            0x0AC1 => return true,
            0x0AC2 => return true,
            0x0AC3 => return true,
            0x0AC4 => return true,
            0x0AC5 => return true,
            0x0AC7 => return true,
            0x0AC8 => return true,
            0x0ACD => return true,
            0x0AE2 => return true,
            0x0AE3 => return true,
            0x0B01 => return true,
            0x0B3C => return true,
            0x0B3F => return true,
            0x0B41 => return true,
            0x0B42 => return true,
            0x0B43 => return true,
            0x0B44 => return true,
            0x0B4D => return true,
            0x0B56 => return true,
            0x0B62 => return true,
            0x0B63 => return true,
            0x0B82 => return true,
            0x0BC0 => return true,
            0x0BCD => return true,
            0x0C00 => return true,
            0x0C3F => return true,
            0x0C40 => return true,
            0x0C46 => return true,
            0x0C47 => return true,
            0x0C48 => return true,
            0x0C4A => return true,
            0x0C4B => return true,
            0x0C4C => return true,
            0x0C4D => return true,
            0x0C55 => return true,
            0x0C56 => return true,
            0x0C62 => return true,
            0x0C63 => return true,
            0x0C81 => return true,
            0x0CBC => return true,
            0x0CBF => return true,
            0x0CC6 => return true,
            0x0CE2 => return true,
            0x0CE3 => return true,
            0x0D01 => return true,
            0x0D4D => return true,
            0x0D62 => return true,
            0x0D63 => return true,
            0x0DCA => return true,
            0x0DD2 => return true,
            0x0DD3 => return true,
            0x0DD4 => return true,
            0x0DD6 => return true,
            0x0E31 => return true,
            0x0E34 => return true,
            0x0E35 => return true,
            0x0E36 => return true,
            0x0E37 => return true,
            0x0E38 => return true,
            0x0E39 => return true,
            0x0E3A => return true,
            0x0E47 => return true,
            0x0E48 => return true,
            0x0E49 => return true,
            0x0E4A => return true,
            0x0E4B => return true,
            0x0E4C => return true,
            0x0E4D => return true,
            0x0E4E => return true,
            0x0EB1 => return true,
            0x0EB4 => return true,
            0x0EB5 => return true,
            0x0EB6 => return true,
            0x0EB7 => return true,
            0x0EB8 => return true,
            0x0EB9 => return true,
            0x0EBB => return true,
            0x0EBC => return true,
            0x0EC8 => return true,
            0x0EC9 => return true,
            0x0ECA => return true,
            0x0ECB => return true,
            0x0ECC => return true,
            0x0ECD => return true,
            0x0F18 => return true,
            0x0F19 => return true,
            0x0F35 => return true,
            0x0F37 => return true,
            0x0F39 => return true,
            0x0F71 => return true,
            0x0F72 => return true,
            0x0F73 => return true,
            0x0F74 => return true,
            0x0F75 => return true,
            0x0F76 => return true,
            0x0F77 => return true,
            0x0F78 => return true,
            0x0F79 => return true,
            0x0F7A => return true,
            0x0F7B => return true,
            0x0F7C => return true,
            0x0F7D => return true,
            0x0F7E => return true,
            0x0F80 => return true,
            0x0F81 => return true,
            0x0F82 => return true,
            0x0F83 => return true,
            0x0F84 => return true,
            0x0F86 => return true,
            0x0F87 => return true,
            0x0F8D => return true,
            0x0F8E => return true,
            0x0F8F => return true,
            0x0F90 => return true,
            0x0F91 => return true,
            0x0F92 => return true,
            0x0F93 => return true,
            0x0F94 => return true,
            0x0F95 => return true,
            0x0F96 => return true,
            0x0F97 => return true,
            0x0F99 => return true,
            0x0F9A => return true,
            0x0F9B => return true,
            0x0F9C => return true,
            0x0F9D => return true,
            0x0F9E => return true,
            0x0F9F => return true,
            0x0FA0 => return true,
            0x0FA1 => return true,
            0x0FA2 => return true,
            0x0FA3 => return true,
            0x0FA4 => return true,
            0x0FA5 => return true,
            0x0FA6 => return true,
            0x0FA7 => return true,
            0x0FA8 => return true,
            0x0FA9 => return true,
            0x0FAA => return true,
            0x0FAB => return true,
            0x0FAC => return true,
            0x0FAD => return true,
            0x0FAE => return true,
            0x0FAF => return true,
            0x0FB0 => return true,
            0x0FB1 => return true,
            0x0FB2 => return true,
            0x0FB3 => return true,
            0x0FB4 => return true,
            0x0FB5 => return true,
            0x0FB6 => return true,
            0x0FB7 => return true,
            0x0FB8 => return true,
            0x0FB9 => return true,
            0x0FBA => return true,
            0x0FBB => return true,
            0x0FBC => return true,
            0x0FC6 => return true,
            0x102D => return true,
            0x102E => return true,
            0x102F => return true,
            0x1030 => return true,
            0x1032 => return true,
            0x1033 => return true,
            0x1034 => return true,
            0x1035 => return true,
            0x1036 => return true,
            0x1037 => return true,
            0x1039 => return true,
            0x103A => return true,
            0x103D => return true,
            0x103E => return true,
            0x1058 => return true,
            0x1059 => return true,
            0x105E => return true,
            0x105F => return true,
            0x1060 => return true,
            0x1071 => return true,
            0x1072 => return true,
            0x1073 => return true,
            0x1074 => return true,
            0x1082 => return true,
            0x1085 => return true,
            0x1086 => return true,
            0x108D => return true,
            0x109D => return true,
            0x135D => return true,
            0x135E => return true,
            0x135F => return true,
            0x17B7 => return true,
            0x17B8 => return true,
            0x17B9 => return true,
            0x17BA => return true,
            0x17BB => return true,
            0x17BC => return true,
            0x17BD => return true,
            0x17BE => return true,
            0x17C6 => return true,
            0x17C9 => return true,
            0x17CA => return true,
            0x17CB => return true,
            0x17CC => return true,
            0x17CD => return true,
            0x17CE => return true,
            0x17CF => return true,
            0x17D0 => return true,
            0x17D1 => return true,
            0x17D2 => return true,
            0x17D3 => return true,
            0x17DD => return true,
            0x180B => return true,
            0x180C => return true,
            0x180D => return true,
            0x18A9 => return true,
            0x1A17 => return true,
            0x1A18 => return true,
            0x1A56 => return true,
            0x1A58 => return true,
            0x1A59 => return true,
            0x1A5A => return true,
            0x1A5B => return true,
            0x1A5C => return true,
            0x1A5D => return true,
            0x1A5E => return true,
            0x1A60 => return true,
            0x1A62 => return true,
            0x1A65 => return true,
            0x1A66 => return true,
            0x1A67 => return true,
            0x1A68 => return true,
            0x1A69 => return true,
            0x1A6A => return true,
            0x1A6B => return true,
            0x1A6C => return true,
            0x1A73 => return true,
            0x1A74 => return true,
            0x1A75 => return true,
            0x1A76 => return true,
            0x1A77 => return true,
            0x1A78 => return true,
            0x1A79 => return true,
            0x1A7A => return true,
            0x1A7B => return true,
            0x1A7C => return true,
            0x1A7F => return true,
            0x1AB0 => return true,
            0x1AB1 => return true,
            0x1AB2 => return true,
            0x1AB3 => return true,
            0x1AB4 => return true,
            0x1AB5 => return true,
            0x1AB6 => return true,
            0x1AB7 => return true,
            0x1AB8 => return true,
            0x1AB9 => return true,
            0x1ABA => return true,
            0x1ABB => return true,
            0x1ABC => return true,
            0x1ABD => return true,
            0x1C2C => return true,
            0x1C2D => return true,
            0x1C2E => return true,
            0x1C2F => return true,
            0x1C30 => return true,
            0x1C31 => return true,
            0x1C32 => return true,
            0x1C33 => return true,
            0x1C36 => return true,
            0x1C37 => return true,
            0x1DC0 => return true,
            0x1DC1 => return true,
            0x1DC2 => return true,
            0x1DC3 => return true,
            0x1DC4 => return true,
            0x1DC5 => return true,
            0x1DC6 => return true,
            0x1DC7 => return true,
            0x1DC8 => return true,
            0x1DC9 => return true,
            0x1DCA => return true,
            0x1DCB => return true,
            0x1DCC => return true,
            0x1DCD => return true,
            0x1DCE => return true,
            0x1DCF => return true,
            0x1DD0 => return true,
            0x1DD1 => return true,
            0x1DD2 => return true,
            0x1DD3 => return true,
            0x1DD4 => return true,
            0x1DD5 => return true,
            0x1DD6 => return true,
            0x1DD7 => return true,
            0x1DD8 => return true,
            0x1DD9 => return true,
            0x1DDA => return true,
            0x1DDB => return true,
            0x1DDC => return true,
            0x1DDD => return true,
            0x1DDE => return true,
            0x1DDF => return true,
            0x1DE0 => return true,
            0x1DE1 => return true,
            0x1DE2 => return true,
            0x1DE3 => return true,
            0x1DE4 => return true,
            0x1DE5 => return true,
            0x1DE6 => return true,
            0x1DE7 => return true,
            0x1DE8 => return true,
            0x1DE9 => return true,
            0x1DEA => return true,
            0x1DEB => return true,
            0x1DEC => return true,
            0x1DED => return true,
            0x1DEE => return true,
            0x1DEF => return true,
            0x1DF0 => return true,
            0x1DF1 => return true,
            0x1DF2 => return true,
            0x1DF3 => return true,
            0x1DF4 => return true,
            0x1DF5 => return true,
            0x1DFC => return true,
            0x1DFD => return true,
            0x1DFE => return true,
            0x1DFF => return true,
            0x20D0 => return true,
            0x20D1 => return true,
            0x20D2 => return true,
            0x20D3 => return true,
            0x20D4 => return true,
            0x20D5 => return true,
            0x20D6 => return true,
            0x20D7 => return true,
            0x20D8 => return true,
            0x20D9 => return true,
            0x20DA => return true,
            0x20DB => return true,
            0x20DC => return true,
            0x20E1 => return true,
            0x20E5 => return true,
            0x20E6 => return true,
            0x20E7 => return true,
            0x20E8 => return true,
            0x20E9 => return true,
            0x20EA => return true,
            0x20EB => return true,
            0x20EC => return true,
            0x20ED => return true,
            0x20EE => return true,
            0x20EF => return true,
            0x20F0 => return true,
            0x2D7F => return true,
            0x302A => return true,
            0x302B => return true,
            0x302C => return true,
            0x302D => return true,
            0x3099 => return true,
            0x309A => return true,
            0xA66F => return true,
            0xA674 => return true,
            0xA675 => return true,
            0xA676 => return true,
            0xA677 => return true,
            0xA678 => return true,
            0xA679 => return true,
            0xA67A => return true,
            0xA67B => return true,
            0xA67C => return true,
            0xA67D => return true,
            0xA69E => return true,
            0xA69F => return true,
            0xA6F0 => return true,
            0xA6F1 => return true,
            0xA8E0 => return true,
            0xA8E1 => return true,
            0xA8E2 => return true,
            0xA8E3 => return true,
            0xA8E4 => return true,
            0xA8E5 => return true,
            0xA8E6 => return true,
            0xA8E7 => return true,
            0xA8E8 => return true,
            0xA8E9 => return true,
            0xA8EA => return true,
            0xA8EB => return true,
            0xA8EC => return true,
            0xA8ED => return true,
            0xA8EE => return true,
            0xA8EF => return true,
            0xA8F0 => return true,
            0xA8F1 => return true,
            0xA926 => return true,
            0xA927 => return true,
            0xA928 => return true,
            0xA929 => return true,
            0xA92A => return true,
            0xA92B => return true,
            0xA92C => return true,
            0xA92D => return true,
            0xA9E5 => return true,
            0xAA29 => return true,
            0xAA2A => return true,
            0xAA2B => return true,
            0xAA2C => return true,
            0xAA2D => return true,
            0xAA2E => return true,
            0xAA31 => return true,
            0xAA32 => return true,
            0xAA35 => return true,
            0xAA36 => return true,
            0xAA43 => return true,
            0xAA4C => return true,
            0xAA7C => return true,
            0xFB1E => return true,
            0xFC5E => return true,
            0xFC5F => return true,
            0xFC60 => return true,
            0xFC61 => return true,
            0xFC62 => return true,
            0xFC63 => return true,
            0xFE00 => return true,
            0xFE01 => return true,
            0xFE02 => return true,
            0xFE03 => return true,
            0xFE04 => return true,
            0xFE05 => return true,
            0xFE06 => return true,
            0xFE07 => return true,
            0xFE08 => return true,
            0xFE09 => return true,
            0xFE0A => return true,
            0xFE0B => return true,
            0xFE0C => return true,
            0xFE0D => return true,
            0xFE0E => return true,
            0xFE0F => return true,
            0xFE22 => return true,
            0xFE23 => return true,
            0xFE24 => return true,
            0xFE25 => return true,
            0xFE26 => return true,
            0xFE29 => return true,
            0xFE2A => return true,
            0xFE2B => return true,
            0xFE2C => return true,
            0xFE2D => return true,
            0xFE2E => return true,
            0xFE2F => return true,
            0x101FD => return true,
            0x11100 => return true,
            0x11101 => return true,
            0x11102 => return true,
            0x11127 => return true,
            0x11128 => return true,
            0x11129 => return true,
            0x1112A => return true,
            0x1112B => return true,
            0x1112D => return true,
            0x1112E => return true,
            0x1112F => return true,
            0x11130 => return true,
            0x11131 => return true,
            0x11132 => return true,
            0x11133 => return true,
            0x11134 => return true,
            0x16B30 => return true,
            0x16B31 => return true,
            0x16B32 => return true,
            0x16B33 => return true,
            0x16B34 => return true,
            0x16B35 => return true,
            0x16B36 => return true,
            0x1D167 => return true,
            0x1D168 => return true,
            0x1D169 => return true,
            0x1D17B => return true,
            0x1D17C => return true,
            0x1D17D => return true,
            0x1D17E => return true,
            0x1D17F => return true,
            0x1D180 => return true,
            0x1D181 => return true,
            0x1D182 => return true,
            0x1D185 => return true,
            0x1D186 => return true,
            0x1D187 => return true,
            0x1D188 => return true,
            0x1D189 => return true,
            0x1D18A => return true,
            0x1D18B => return true,
            0x1D1AA => return true,
            0x1D1AB => return true,
            0x1D1AC => return true,
            0x1D1AD => return true,
            0x1E000 => return true,
            0x1E001 => return true,
            0x1E002 => return true,
            0x1E003 => return true,
            0x1E004 => return true,
            0x1E005 => return true,
            0x1E006 => return true,
            0x1E008 => return true,
            0x1E009 => return true,
            0x1E00A => return true,
            0x1E00B => return true,
            0x1E00C => return true,
            0x1E00D => return true,
            0x1E00E => return true,
            0x1E00F => return true,
            0x1E010 => return true,
            0x1E011 => return true,
            0x1E012 => return true,
            0x1E013 => return true,
            0x1E014 => return true,
            0x1E015 => return true,
            0x1E016 => return true,
            0x1E017 => return true,
            0x1E018 => return true,
            0x1E01B => return true,
            0x1E01C => return true,
            0x1E01D => return true,
            0x1E01E => return true,
            0x1E01F => return true,
            0x1E020 => return true,
            0x1E021 => return true,
            0x1E023 => return true,
            0x1E024 => return true,
            0x1E026 => return true,
            0x1E027 => return true,
            0x1E028 => return true,
            0x1E029 => return true,
            0x1E02A => return true,
            0x1E130 => return true,
            0x1E131 => return true,
            0x1E132 => return true,
            0x1E133 => return true,
            0x1E134 => return true,
            0x1E135 => return true,
            0x1E136 => return true,
            0x1E944 => return true,
            0x1E945 => return true,
            0x1E946 => return true,
            0x1E947 => return true,
            0x1E948 => return true,
            0x1E949 => return true,
            0x1E94A => return true,
            0x1E94B => return true,
            _ => (),
        }
    }
    false
}

pub(crate) fn is_nonspacing_mark(codepoints: &HashSet<u32>, name: &str) -> bool {
    // Try first by name, then codepoint
    is_nonspacing_mark_name(name) || any_nonspacing_mark_codepoint(codepoints)
}
